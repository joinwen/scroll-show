'use strict';

/**
 * 获取 dom 属性
 */
const getStyle = (ele, attr) => {
  try{
    return document.defaultView.getComputedStyle(ele)[attr];
  }catch (e) {
    return 0;
  }
};

/**
 * 字符串转数字
 */
const toNumber = (str) => {
  return Number.parseInt(str);
};

/**
 * 获取 高度
 */
const getHeight = (ele) => {
  let height = getStyle(ele,"height");
  return toNumber(height);
};

/**
 * 获取 高度 + 内边距
 */
const getHeightWithPadding = (ele) => {
  return ele.clientHeight;
};

/**
 * 获取 高度 + 内边距 + 边框
 */
const getHeightWithBorder = (ele) => {
  return ele.offsetHeight;
};

/**
 * 获取宽度
 */
const getWidth = (ele) => {
  let width = getStyle(ele, "width");
  return toNumber(width);
};

/**
 * 获取宽度 + 内边距
 */
const getWidthWithPadding = (ele) => {
  return ele.clientWidth;
};

/**
 * 获取 宽度 + 内边距 + 边框
 */
const getWidthWithBorder = (ele) => {
  return ele.offsetWidth;
};

/**
 * 获取元素的 pageY
 */
const pageY = (ele, bcr) => {
  if(bcr) {
    return ele.getBoundingClientRect()["y"];
  }
  let y = 0;
  while(ele.offsetParent) {
    y += ele.offsetTop;
    ele = ele.offsetParent;
  }
  return y;
};

/**
 * 获取元素的 pageX
 */
const pageX = (ele, bcr) => {
  if(bcr) {
    return ele.getBoundingClientRect()["x"];
  }
  let x = 0;
  while(ele.offsetParent) {
    x += ele.offsetLeft;
    ele = ele.offsetParent;
  }
  return x;
};

/**
 *
 * 获取 src 在 target 元素里的 clientX
 * @param target 相对的坐标系统
 * @param src
 */
const clientX = (target, src, bcr) => {
  let srcX = pageX(src, bcr),
    targetX = pageX(target, bcr),
    scrollX = target.offsetLeft || 0; // 没有滚动 scrollX = 0
  return bcr ? srcX - targetX : srcX - targetX - scrollX;
};

/**
 * 获取 src 在 target 元素里的 clientY
 * @param target
 * @param src
 */
const clientY = (target, src, bcr) => {
  let srcY = pageY(src, bcr),
    targetY = pageY(target, bcr),
    scrollY = target.scrollTop || 0;     // 没有滚动 scrollY = 0
  return bcr ? srcY - targetY : srcY - targetY - scrollY;
};

/**
 *
 * @param y 元素 在 父元素内的相对位置
 * @param options
 */
const judgeY = (y, options) => {
  options.wrapped;
    let child = options.child,
    wHeight = options.wHeight,
    cHeight = options.cHeight,
    callback = options.cbY,
    top = options.top,
    bottom = options.bottom;
  if(y > bottom) {
    y += bottom;
  } else {
    y -= top;
  }
  if(y <= 0) {
    /**
     * 如果 y 为负数，元素被【上面】遮挡
     */
    let newY = y + cHeight;
    if(newY > 0) { // 部分遮挡
      callback(child, true, 1);
    } else {      // 全部遮挡
      callback(child, false, 1);
    }
  } else {
    /**
     * 如果 y 为 正数，元素可能被【下面】遮挡
     */
    if(y <= wHeight) { // 被【下面】部分遮挡
      callback(child, true, 2);
    } else {  // 被【下面】完全遮挡
      callback(child, false, 2);
    }
  }
};

const updatePositionByWLevel = (options, x, y) => {
  let wLevel = options.wLevel,
    wrapped = options.wrapped,
    pt = toNumber(getStyle(wrapped,"padding-top")),
    bt = toNumber(getStyle(wrapped, "border-top-width")),
    pl = toNumber(getStyle(wrapped, "padding-left")),
    bl = toNumber(getStyle(wrapped, "border-left-width"));
  switch (wLevel) {
    case 0: {
      y = y - pt - bt;
      x = x - pl - bl;
      options.wHeight = getHeight(wrapped);
      options.wWidth = getWidth(wrapped);
    }break;
    case 1: {
      y = y - bt;
      x = x - bl;
      options.wHeight = getHeightWithPadding(wrapped);
      options.wWidth = getWidthWithPadding(wrapped);
    }break;
    case 2: {
      y = y * 1;
      x = x * 1;
      options.wHeight = getHeightWithBorder(wrapped);
      options.wWidth = getWidthWithBorder(wrapped);
    }break;
  }
  return [x, y]
};

const updatePositionByCLevel = (options, x, y) => {
  let cLevel = options.cLevel,
    child = options.child,
    pt = toNumber(getStyle(child, "padding-top")),
    bt = toNumber(getStyle(child, "border-top-width")),
    pl = toNumber(getStyle(child, "padding-left")),
    bl = toNumber(getStyle(child, "border-left-width"));
  switch (cLevel) {
    case 0: {
      y = y + pt + bt;
      x = x + pl + bl;
      options.cHeight = getHeight(child);
      options.cWidth = getWidth(child);
    }break;
    case 1: {
      y = y + bt;
      x = x + bl;
      options.cHeight = getHeightWithPadding(child);
      options.cWidth = getWidthWithPadding(child);
    }break;
    case 2: {
      y = y * 1;
      x = x * 1;
      options.cHeight = getHeightWithBorder(child);
      options.cWidth = getWidthWithBorder(child);
    }break;
  }
  return [x, y];
};

const defaultOptions = {
  wrapped: null, // 父元素
  child: null, // 子元素
  wLevel: 1,  // 0: 只是内容区, 1: 内容区+内边距, 2: 内容区 + 内边距 + 边框
  cLevel: 2,  // 0: 只是内容区, 1: 内容区+内边距, 2: 内容区 + 内边距 + 边框
  symY: 0,    // 对称 Y 偏移
  symX: 0,    // 对称 X 偏移
  top: 0,     // top 偏移
  bottom: 0,  // bottom 偏移
  left: 0,    // left 偏移
  right: 0,   // right 偏移
  wHeight: 0, // 容器高度
  wWidth: 0,  // 容器宽度
  cHeight: 0, // 子元素高度
  cWidth: 0,  // 子元素宽度
  enableBCR: false, // 是否启用 getBoundingClientRect
  cbY: () => {
  },  // 回调函数
  cbX: () => {

  },  // 回调函数
  ratio: undefined, // 子元素出现比例 TODO
  ratioFn: undefined, // 子元素出现比例 自定义函数 TODO
};
const handleOptions = (options) => {
  let symY = options.symY,
    symX = options.symX;
  if(symY) {
    options.top = symY;
    options.bottom = symY;
  }
  if(symX) {
    options.left = symX;
    options.right = symX;
  }
};

const scrollShow = (options) => {
  options = Object.assign(defaultOptions, options);
  handleOptions(options);
  let y = clientY(options.wrapped, options.child, options.enableBCR);
  let x = clientX(options.wrapped, options.child, options.enableBCR);
  [x, y] = updatePositionByWLevel(options, x, y);
  [x, y] = updatePositionByCLevel(options, x, y);
  judgeY(y, options);
  // judgeX(x, options);
};

module.exports = scrollShow;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2Nyb2xsLXNob3cuY2pzLmpzIiwic291cmNlcyI6WyIuLi9zcmMvdG9vbHMvaW5kZXguanMiLCIuLi9zcmMvY29yZS9qdWRnZS9pbmRleC5qcyIsIi4uL3NyYy9jb3JlL3Bvc2l0aW9uL2luZGV4LmpzIiwiLi4vc3JjL2NvcmUvb3B0aW9ucy9pbmRleC5qcyIsIi4uL3NyYy9jb3JlL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiDojrflj5YgZG9tIOWxnuaAp1xyXG4gKi9cclxuY29uc3QgZ2V0U3R5bGUgPSAoZWxlLCBhdHRyKSA9PiB7XHJcbiAgdHJ5e1xyXG4gICAgcmV0dXJuIGRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoZWxlKVthdHRyXTtcclxuICB9Y2F0Y2ggKGUpIHtcclxuICAgIHJldHVybiAwO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIOWtl+espuS4sui9rOaVsOWtl1xyXG4gKi9cclxuY29uc3QgdG9OdW1iZXIgPSAoc3RyKSA9PiB7XHJcbiAgcmV0dXJuIE51bWJlci5wYXJzZUludChzdHIpO1xyXG59XHJcblxyXG4vKipcclxuICog6I635Y+WIOmrmOW6plxyXG4gKi9cclxuY29uc3QgZ2V0SGVpZ2h0ID0gKGVsZSkgPT4ge1xyXG4gIGxldCBoZWlnaHQgPSBnZXRTdHlsZShlbGUsXCJoZWlnaHRcIik7XHJcbiAgcmV0dXJuIHRvTnVtYmVyKGhlaWdodCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDojrflj5Yg6auY5bqmICsg5YaF6L656LedXHJcbiAqL1xyXG5jb25zdCBnZXRIZWlnaHRXaXRoUGFkZGluZyA9IChlbGUpID0+IHtcclxuICByZXR1cm4gZWxlLmNsaWVudEhlaWdodDtcclxufVxyXG5cclxuLyoqXHJcbiAqIOiOt+WPliDpq5jluqYgKyDlhoXovrnot50gKyDovrnmoYZcclxuICovXHJcbmNvbnN0IGdldEhlaWdodFdpdGhCb3JkZXIgPSAoZWxlKSA9PiB7XHJcbiAgcmV0dXJuIGVsZS5vZmZzZXRIZWlnaHQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDojrflj5Yg6auY5bqmICsg5YaF6L656LedICsg6L655qGGICsg5aSW6L656LedXHJcbiAqL1xyXG5jb25zdCBnZXRIZWlnaHRXaXRoTWFyZ2luID0gKGVsZSkgPT4ge1xyXG4gIGxldCBoZWlnaHQgPSBnZXRIZWlnaHRXaXRoQm9yZGVyKGVsZSksXHJcbiAgICBtdCA9IGdldFN0eWxlKGVsZSwgXCJtYXJnaW4tdG9wXCIpLFxyXG4gICAgbWIgPSBnZXRTdHlsZShlbGUsIFwibWFyZ2luLWJvdHRvbVwiKTtcclxuICByZXR1cm4gaGVpZ2h0ICsgdG9OdW1iZXIobXQpICsgdG9OdW1iZXIobWIpO1xyXG59XHJcblxyXG4vKipcclxuICog6I635Y+W5a695bqmXHJcbiAqL1xyXG5jb25zdCBnZXRXaWR0aCA9IChlbGUpID0+IHtcclxuICBsZXQgd2lkdGggPSBnZXRTdHlsZShlbGUsIFwid2lkdGhcIik7XHJcbiAgcmV0dXJuIHRvTnVtYmVyKHdpZHRoKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIOiOt+WPluWuveW6piArIOWGhei+uei3nVxyXG4gKi9cclxuY29uc3QgZ2V0V2lkdGhXaXRoUGFkZGluZyA9IChlbGUpID0+IHtcclxuICByZXR1cm4gZWxlLmNsaWVudFdpZHRoO1xyXG59XHJcblxyXG4vKipcclxuICog6I635Y+WIOWuveW6piArIOWGhei+uei3nSArIOi+ueahhlxyXG4gKi9cclxuY29uc3QgZ2V0V2lkdGhXaXRoQm9yZGVyID0gKGVsZSkgPT4ge1xyXG4gIHJldHVybiBlbGUub2Zmc2V0V2lkdGg7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDojrflj5Yg5a695bqmICsg5YaF6L656LedICsg6L655qGGICsg5aSW6L656LedXHJcbiAqL1xyXG5jb25zdCBnZXRXaWR0aFdpdGhNYXJnaW4gPSAoZWxlKSA9PiB7XHJcbiAgbGV0IHdpZHRoID0gZ2V0V2lkdGhXaXRoQm9yZGVyKGVsZSksXHJcbiAgICBtbCA9IGdldFN0eWxlKGVsZSwgXCJtYXJnaW4tbGVmdFwiKSxcclxuICAgIG1yID0gZ2V0U3R5bGUoZWxlLFwibWFyZ2luLXJpZ2h0XCIpO1xyXG4gIHJldHVybiB3aWR0aCArIHRvTnVtYmVyKG1sKSArIHRvTnVtYmVyKG1yKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIOiOt+WPluWFg+e0oOeahCBwYWdlWVxyXG4gKi9cclxuY29uc3QgcGFnZVkgPSAoZWxlLCBiY3IpID0+IHtcclxuICBpZihiY3IpIHtcclxuICAgIHJldHVybiBlbGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClbXCJ5XCJdO1xyXG4gIH1cclxuICBsZXQgeSA9IDA7XHJcbiAgd2hpbGUoZWxlLm9mZnNldFBhcmVudCkge1xyXG4gICAgeSArPSBlbGUub2Zmc2V0VG9wO1xyXG4gICAgZWxlID0gZWxlLm9mZnNldFBhcmVudDtcclxuICB9XHJcbiAgcmV0dXJuIHk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDojrflj5blhYPntKDnmoQgcGFnZVhcclxuICovXHJcbmNvbnN0IHBhZ2VYID0gKGVsZSwgYmNyKSA9PiB7XHJcbiAgaWYoYmNyKSB7XHJcbiAgICByZXR1cm4gZWxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpW1wieFwiXTtcclxuICB9XHJcbiAgbGV0IHggPSAwO1xyXG4gIHdoaWxlKGVsZS5vZmZzZXRQYXJlbnQpIHtcclxuICAgIHggKz0gZWxlLm9mZnNldExlZnQ7XHJcbiAgICBlbGUgPSBlbGUub2Zmc2V0UGFyZW50O1xyXG4gIH1cclxuICByZXR1cm4geDtcclxufVxyXG5cclxuLyoqXHJcbiAqXHJcbiAqIOiOt+WPliBzcmMg5ZyoIHRhcmdldCDlhYPntKDph4znmoQgY2xpZW50WFxyXG4gKiBAcGFyYW0gdGFyZ2V0IOebuOWvueeahOWdkOagh+ezu+e7n1xyXG4gKiBAcGFyYW0gc3JjXHJcbiAqL1xyXG5jb25zdCBjbGllbnRYID0gKHRhcmdldCwgc3JjLCBiY3IpID0+IHtcclxuICBsZXQgc3JjWCA9IHBhZ2VYKHNyYywgYmNyKSxcclxuICAgIHRhcmdldFggPSBwYWdlWCh0YXJnZXQsIGJjciksXHJcbiAgICBzY3JvbGxYID0gdGFyZ2V0Lm9mZnNldExlZnQgfHwgMDsgLy8g5rKh5pyJ5rua5YqoIHNjcm9sbFggPSAwXHJcbiAgcmV0dXJuIGJjciA/IHNyY1ggLSB0YXJnZXRYIDogc3JjWCAtIHRhcmdldFggLSBzY3JvbGxYO1xyXG59XHJcblxyXG4vKipcclxuICog6I635Y+WIHNyYyDlnKggdGFyZ2V0IOWFg+e0oOmHjOeahCBjbGllbnRZXHJcbiAqIEBwYXJhbSB0YXJnZXRcclxuICogQHBhcmFtIHNyY1xyXG4gKi9cclxuY29uc3QgY2xpZW50WSA9ICh0YXJnZXQsIHNyYywgYmNyKSA9PiB7XHJcbiAgbGV0IHNyY1kgPSBwYWdlWShzcmMsIGJjciksXHJcbiAgICB0YXJnZXRZID0gcGFnZVkodGFyZ2V0LCBiY3IpLFxyXG4gICAgc2Nyb2xsWSA9IHRhcmdldC5zY3JvbGxUb3AgfHwgMDsgICAgIC8vIOayoeaciea7muWKqCBzY3JvbGxZID0gMFxyXG4gIHJldHVybiBiY3IgPyBzcmNZIC0gdGFyZ2V0WSA6IHNyY1kgLSB0YXJnZXRZIC0gc2Nyb2xsWTtcclxufVxyXG5cclxuZXhwb3J0IHtcclxuICBjbGllbnRYLFxyXG4gIGNsaWVudFksXHJcbiAgZ2V0SGVpZ2h0LFxyXG4gIGdldEhlaWdodFdpdGhQYWRkaW5nLFxyXG4gIGdldEhlaWdodFdpdGhCb3JkZXIsXHJcbiAgZ2V0SGVpZ2h0V2l0aE1hcmdpbixcclxuICBnZXRXaWR0aCxcclxuICBnZXRXaWR0aFdpdGhQYWRkaW5nLFxyXG4gIGdldFdpZHRoV2l0aEJvcmRlcixcclxuICBnZXRXaWR0aFdpdGhNYXJnaW4sXHJcbiAgcGFnZVgsXHJcbiAgcGFnZVksXHJcbiAgZ2V0U3R5bGUsXHJcbiAgdG9OdW1iZXJcclxufVxyXG4iLCIvKipcbiAqXG4gKiBAcGFyYW0geSDlhYPntKAg5ZyoIOeItuWFg+e0oOWGheeahOebuOWvueS9jee9rlxuICogQHBhcmFtIG9wdGlvbnNcbiAqL1xuY29uc3QganVkZ2VZID0gKHksIG9wdGlvbnMpID0+IHtcbiAgbGV0IHdyYXBwZWQgPSBvcHRpb25zLndyYXBwZWQsXG4gICAgY2hpbGQgPSBvcHRpb25zLmNoaWxkLFxuICAgIHdIZWlnaHQgPSBvcHRpb25zLndIZWlnaHQsXG4gICAgY0hlaWdodCA9IG9wdGlvbnMuY0hlaWdodCxcbiAgICBjYWxsYmFjayA9IG9wdGlvbnMuY2JZLFxuICAgIHRvcCA9IG9wdGlvbnMudG9wLFxuICAgIGJvdHRvbSA9IG9wdGlvbnMuYm90dG9tO1xuICBpZih5ID4gYm90dG9tKSB7XG4gICAgeSArPSBib3R0b207XG4gIH0gZWxzZSB7XG4gICAgeSAtPSB0b3A7XG4gIH1cbiAgaWYoeSA8PSAwKSB7XG4gICAgLyoqXG4gICAgICog5aaC5p6cIHkg5Li66LSf5pWw77yM5YWD57Sg6KKr44CQ5LiK6Z2i44CR6YGu5oyhXG4gICAgICovXG4gICAgbGV0IG5ld1kgPSB5ICsgY0hlaWdodDtcbiAgICBpZihuZXdZID4gMCkgeyAvLyDpg6jliIbpga7mjKFcbiAgICAgIGNhbGxiYWNrKGNoaWxkLCB0cnVlLCAxKTtcbiAgICB9IGVsc2UgeyAgICAgIC8vIOWFqOmDqOmBruaMoVxuICAgICAgY2FsbGJhY2soY2hpbGQsIGZhbHNlLCAxKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLyoqXG4gICAgICog5aaC5p6cIHkg5Li6IOato+aVsO+8jOWFg+e0oOWPr+iDveiiq+OAkOS4i+mdouOAkemBruaMoVxuICAgICAqL1xuICAgIGlmKHkgPD0gd0hlaWdodCkgeyAvLyDooqvjgJDkuIvpnaLjgJHpg6jliIbpga7mjKFcbiAgICAgIGNhbGxiYWNrKGNoaWxkLCB0cnVlLCAyKTtcbiAgICB9IGVsc2UgeyAgLy8g6KKr44CQ5LiL6Z2i44CR5a6M5YWo6YGu5oyhXG4gICAgICBjYWxsYmFjayhjaGlsZCwgZmFsc2UsIDIpO1xuICAgIH1cbiAgfVxufVxuXG5jb25zdCBqdWRnZVggPSAoeCwgb3B0aW9ucykgPT4ge1xuICBsZXQgd3JhcHBlZCA9IG9wdGlvbnMud3JhcHBlZCxcbiAgICBjaGlsZCA9IG9wdGlvbnMuY2hpbGQsXG4gICAgd1dpZHRoID0gb3B0aW9ucy53V2lkdGgsXG4gICAgY1dpZHRoID0gb3B0aW9ucy5jV2lkdGgsXG4gICAgY2FsbGJhY2sgPSBvcHRpb25zLmNiWCxcbiAgICBsZWZ0ID0gb3B0aW9ucy5sZWZ0LFxuICAgIHJpZ2h0ID0gb3B0aW9ucy5yaWdodDtcbiAgaWYoeCA+IHJpZ2h0KSB7XG4gICAgeCArPSByaWdodDtcbiAgfSBlbHNlIHtcbiAgICB4IC09IGxlZnQ7XG4gIH1cbiAgaWYoeCA8PSAwKSB7XG4gICAgLyoqXG4gICAgICog5aaC5p6cIHgg5Li66LSf5pWw77yM5YWD57Sg6KKr44CQ5bem6Z2i44CR6YGu5oyhXG4gICAgICovXG4gICAgbGV0IG5ld1ggPSB4ICsgY1dpZHRoO1xuICAgIGlmKG5ld1ggPiAwKSB7IC8vIOmDqOWIhumBruaMoVxuICAgICAgY2FsbGJhY2soY2hpbGQsIHRydWUsIDEpO1xuICAgIH0gZWxzZSB7ICAgICAgLy8g5YWo6YOo6YGu5oyhXG4gICAgICBjYWxsYmFjayhjaGlsZCwgZmFsc2UsIDEpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvKipcbiAgICAgKiDlpoLmnpwgeCDkuLog5q2j5pWw77yM5YWD57Sg5Y+v6IO96KKr44CQ5Y+z6Z2i44CR6YGu5oyhXG4gICAgICovXG4gICAgaWYoeCA8PSB3V2lkdGgpIHsgLy8g6KKr44CQ5Y+z6Z2i44CR6YOo5YiG6YGu5oyhXG4gICAgICBjYWxsYmFjayhjaGlsZCwgdHJ1ZSwgMik7XG4gICAgfSBlbHNlIHsgIC8vIOiiq+OAkOWPs+mdouOAkeWujOWFqOmBruaMoVxuICAgICAgY2FsbGJhY2soY2hpbGQsIGZhbHNlLCAyKTtcbiAgICB9XG4gIH1cbn1cbmV4cG9ydCB7XG4gIGp1ZGdlWCxcbiAganVkZ2VZXG59XG4iLCJpbXBvcnQge1xuICBnZXRIZWlnaHQsXG4gIGdldEhlaWdodFdpdGhCb3JkZXIsXG4gIGdldEhlaWdodFdpdGhQYWRkaW5nLFxuICBnZXRTdHlsZSxcbiAgZ2V0V2lkdGgsIGdldFdpZHRoV2l0aEJvcmRlcixcbiAgZ2V0V2lkdGhXaXRoUGFkZGluZyxcbiAgdG9OdW1iZXJcbn0gZnJvbSBcIi4uLy4uL3Rvb2xzXCI7XG5cbmNvbnN0IHVwZGF0ZVBvc2l0aW9uQnlXTGV2ZWwgPSAob3B0aW9ucywgeCwgeSkgPT4ge1xuICBsZXQgd0xldmVsID0gb3B0aW9ucy53TGV2ZWwsXG4gICAgd3JhcHBlZCA9IG9wdGlvbnMud3JhcHBlZCxcbiAgICBwdCA9IHRvTnVtYmVyKGdldFN0eWxlKHdyYXBwZWQsXCJwYWRkaW5nLXRvcFwiKSksXG4gICAgYnQgPSB0b051bWJlcihnZXRTdHlsZSh3cmFwcGVkLCBcImJvcmRlci10b3Atd2lkdGhcIikpLFxuICAgIHBsID0gdG9OdW1iZXIoZ2V0U3R5bGUod3JhcHBlZCwgXCJwYWRkaW5nLWxlZnRcIikpLFxuICAgIGJsID0gdG9OdW1iZXIoZ2V0U3R5bGUod3JhcHBlZCwgXCJib3JkZXItbGVmdC13aWR0aFwiKSk7XG4gIHN3aXRjaCAod0xldmVsKSB7XG4gICAgY2FzZSAwOiB7XG4gICAgICB5ID0geSAtIHB0IC0gYnQ7XG4gICAgICB4ID0geCAtIHBsIC0gYmw7XG4gICAgICBvcHRpb25zLndIZWlnaHQgPSBnZXRIZWlnaHQod3JhcHBlZCk7XG4gICAgICBvcHRpb25zLndXaWR0aCA9IGdldFdpZHRoKHdyYXBwZWQpO1xuICAgIH1icmVhaztcbiAgICBjYXNlIDE6IHtcbiAgICAgIHkgPSB5IC0gYnQ7XG4gICAgICB4ID0geCAtIGJsO1xuICAgICAgb3B0aW9ucy53SGVpZ2h0ID0gZ2V0SGVpZ2h0V2l0aFBhZGRpbmcod3JhcHBlZCk7XG4gICAgICBvcHRpb25zLndXaWR0aCA9IGdldFdpZHRoV2l0aFBhZGRpbmcod3JhcHBlZCk7XG4gICAgfWJyZWFrO1xuICAgIGNhc2UgMjoge1xuICAgICAgeSA9IHkgKiAxO1xuICAgICAgeCA9IHggKiAxO1xuICAgICAgb3B0aW9ucy53SGVpZ2h0ID0gZ2V0SGVpZ2h0V2l0aEJvcmRlcih3cmFwcGVkKTtcbiAgICAgIG9wdGlvbnMud1dpZHRoID0gZ2V0V2lkdGhXaXRoQm9yZGVyKHdyYXBwZWQpO1xuICAgIH1icmVhaztcbiAgfVxuICByZXR1cm4gW3gsIHldXG59XG5cbmNvbnN0IHVwZGF0ZVBvc2l0aW9uQnlDTGV2ZWwgPSAob3B0aW9ucywgeCwgeSkgPT4ge1xuICBsZXQgY0xldmVsID0gb3B0aW9ucy5jTGV2ZWwsXG4gICAgY2hpbGQgPSBvcHRpb25zLmNoaWxkLFxuICAgIHB0ID0gdG9OdW1iZXIoZ2V0U3R5bGUoY2hpbGQsIFwicGFkZGluZy10b3BcIikpLFxuICAgIGJ0ID0gdG9OdW1iZXIoZ2V0U3R5bGUoY2hpbGQsIFwiYm9yZGVyLXRvcC13aWR0aFwiKSksXG4gICAgcGwgPSB0b051bWJlcihnZXRTdHlsZShjaGlsZCwgXCJwYWRkaW5nLWxlZnRcIikpLFxuICAgIGJsID0gdG9OdW1iZXIoZ2V0U3R5bGUoY2hpbGQsIFwiYm9yZGVyLWxlZnQtd2lkdGhcIikpO1xuICBzd2l0Y2ggKGNMZXZlbCkge1xuICAgIGNhc2UgMDoge1xuICAgICAgeSA9IHkgKyBwdCArIGJ0O1xuICAgICAgeCA9IHggKyBwbCArIGJsO1xuICAgICAgb3B0aW9ucy5jSGVpZ2h0ID0gZ2V0SGVpZ2h0KGNoaWxkKTtcbiAgICAgIG9wdGlvbnMuY1dpZHRoID0gZ2V0V2lkdGgoY2hpbGQpO1xuICAgIH1icmVhaztcbiAgICBjYXNlIDE6IHtcbiAgICAgIHkgPSB5ICsgYnQ7XG4gICAgICB4ID0geCArIGJsO1xuICAgICAgb3B0aW9ucy5jSGVpZ2h0ID0gZ2V0SGVpZ2h0V2l0aFBhZGRpbmcoY2hpbGQpO1xuICAgICAgb3B0aW9ucy5jV2lkdGggPSBnZXRXaWR0aFdpdGhQYWRkaW5nKGNoaWxkKTtcbiAgICB9YnJlYWs7XG4gICAgY2FzZSAyOiB7XG4gICAgICB5ID0geSAqIDE7XG4gICAgICB4ID0geCAqIDE7XG4gICAgICBvcHRpb25zLmNIZWlnaHQgPSBnZXRIZWlnaHRXaXRoQm9yZGVyKGNoaWxkKTtcbiAgICAgIG9wdGlvbnMuY1dpZHRoID0gZ2V0V2lkdGhXaXRoQm9yZGVyKGNoaWxkKTtcbiAgICB9YnJlYWs7XG4gIH1cbiAgcmV0dXJuIFt4LCB5XTtcbn07XG5leHBvcnQge1xuICB1cGRhdGVQb3NpdGlvbkJ5Q0xldmVsLFxuICB1cGRhdGVQb3NpdGlvbkJ5V0xldmVsXG59XG4iLCJjb25zdCBkZWZhdWx0T3B0aW9ucyA9IHtcbiAgd3JhcHBlZDogbnVsbCwgLy8g54i25YWD57SgXG4gIGNoaWxkOiBudWxsLCAvLyDlrZDlhYPntKBcbiAgd0xldmVsOiAxLCAgLy8gMDog5Y+q5piv5YaF5a655Yy6LCAxOiDlhoXlrrnljLor5YaF6L656LedLCAyOiDlhoXlrrnljLogKyDlhoXovrnot50gKyDovrnmoYZcbiAgY0xldmVsOiAyLCAgLy8gMDog5Y+q5piv5YaF5a655Yy6LCAxOiDlhoXlrrnljLor5YaF6L656LedLCAyOiDlhoXlrrnljLogKyDlhoXovrnot50gKyDovrnmoYZcbiAgc3ltWTogMCwgICAgLy8g5a+556ewIFkg5YGP56e7XG4gIHN5bVg6IDAsICAgIC8vIOWvueensCBYIOWBj+enu1xuICB0b3A6IDAsICAgICAvLyB0b3Ag5YGP56e7XG4gIGJvdHRvbTogMCwgIC8vIGJvdHRvbSDlgY/np7tcbiAgbGVmdDogMCwgICAgLy8gbGVmdCDlgY/np7tcbiAgcmlnaHQ6IDAsICAgLy8gcmlnaHQg5YGP56e7XG4gIHdIZWlnaHQ6IDAsIC8vIOWuueWZqOmrmOW6plxuICB3V2lkdGg6IDAsICAvLyDlrrnlmajlrr3luqZcbiAgY0hlaWdodDogMCwgLy8g5a2Q5YWD57Sg6auY5bqmXG4gIGNXaWR0aDogMCwgIC8vIOWtkOWFg+e0oOWuveW6plxuICBlbmFibGVCQ1I6IGZhbHNlLCAvLyDmmK/lkKblkK/nlKggZ2V0Qm91bmRpbmdDbGllbnRSZWN0XG4gIGNiWTogKCkgPT4ge1xuICB9LCAgLy8g5Zue6LCD5Ye95pWwXG4gIGNiWDogKCkgPT4ge1xuXG4gIH0sICAvLyDlm57osIPlh73mlbBcbiAgcmF0aW86IHVuZGVmaW5lZCwgLy8g5a2Q5YWD57Sg5Ye6546w5q+U5L6LIFRPRE9cbiAgcmF0aW9GbjogdW5kZWZpbmVkLCAvLyDlrZDlhYPntKDlh7rnjrDmr5Tkvosg6Ieq5a6a5LmJ5Ye95pWwIFRPRE9cbn07XG5jb25zdCBoYW5kbGVPcHRpb25zID0gKG9wdGlvbnMpID0+IHtcbiAgbGV0IHN5bVkgPSBvcHRpb25zLnN5bVksXG4gICAgc3ltWCA9IG9wdGlvbnMuc3ltWDtcbiAgaWYoc3ltWSkge1xuICAgIG9wdGlvbnMudG9wID0gc3ltWTtcbiAgICBvcHRpb25zLmJvdHRvbSA9IHN5bVk7XG4gIH1cbiAgaWYoc3ltWCkge1xuICAgIG9wdGlvbnMubGVmdCA9IHN5bVg7XG4gICAgb3B0aW9ucy5yaWdodCA9IHN5bVg7XG4gIH1cbn07XG5leHBvcnQge1xuICBkZWZhdWx0T3B0aW9ucyxcbiAgaGFuZGxlT3B0aW9uc1xufVxuIiwiaW1wb3J0IHtcclxuICBjbGllbnRYLFxyXG4gIGNsaWVudFlcclxufSBmcm9tIFwiLi4vdG9vbHMvaW5kZXhcIjtcclxuaW1wb3J0IHtqdWRnZVgsIGp1ZGdlWX0gZnJvbSBcIi4vanVkZ2VcIjtcclxuaW1wb3J0IHt1cGRhdGVQb3NpdGlvbkJ5Q0xldmVsLCB1cGRhdGVQb3NpdGlvbkJ5V0xldmVsfSBmcm9tIFwiLi9wb3NpdGlvblwiO1xyXG5pbXBvcnQge2RlZmF1bHRPcHRpb25zLCBoYW5kbGVPcHRpb25zfSBmcm9tIFwiLi9vcHRpb25zXCI7XHJcblxyXG5jb25zdCBzY3JvbGxTaG93ID0gKG9wdGlvbnMpID0+IHtcclxuICBvcHRpb25zID0gT2JqZWN0LmFzc2lnbihkZWZhdWx0T3B0aW9ucywgb3B0aW9ucyk7XHJcbiAgaGFuZGxlT3B0aW9ucyhvcHRpb25zKTtcclxuICBsZXQgeSA9IGNsaWVudFkob3B0aW9ucy53cmFwcGVkLCBvcHRpb25zLmNoaWxkLCBvcHRpb25zLmVuYWJsZUJDUik7XHJcbiAgbGV0IHggPSBjbGllbnRYKG9wdGlvbnMud3JhcHBlZCwgb3B0aW9ucy5jaGlsZCwgb3B0aW9ucy5lbmFibGVCQ1IpO1xyXG4gIFt4LCB5XSA9IHVwZGF0ZVBvc2l0aW9uQnlXTGV2ZWwob3B0aW9ucywgeCwgeSk7XHJcbiAgW3gsIHldID0gdXBkYXRlUG9zaXRpb25CeUNMZXZlbChvcHRpb25zLCB4LCB5KTtcclxuICBqdWRnZVkoeSwgb3B0aW9ucyk7XHJcbiAgLy8ganVkZ2VYKHgsIG9wdGlvbnMpO1xyXG59XHJcbmV4cG9ydCBkZWZhdWx0IHNjcm9sbFNob3c7XHJcblxyXG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLFFBQVEsR0FBRyxDQUFDLEdBQUcsRUFBRSxJQUFJLEtBQUs7QUFDaEMsRUFBRSxHQUFHO0FBQ0wsSUFBSSxPQUFPLFFBQVEsQ0FBQyxXQUFXLENBQUMsZ0JBQWdCLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDNUQsR0FBRyxPQUFPLENBQUMsRUFBRTtBQUNiLElBQUksT0FBTyxDQUFDLENBQUM7QUFDYixHQUFHO0FBQ0gsRUFBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxRQUFRLEdBQUcsQ0FBQyxHQUFHLEtBQUs7QUFDMUIsRUFBRSxPQUFPLE1BQU0sQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDOUIsRUFBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxTQUFTLEdBQUcsQ0FBQyxHQUFHLEtBQUs7QUFDM0IsRUFBRSxJQUFJLE1BQU0sR0FBRyxRQUFRLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQ3RDLEVBQUUsT0FBTyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDMUIsRUFBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxvQkFBb0IsR0FBRyxDQUFDLEdBQUcsS0FBSztBQUN0QyxFQUFFLE9BQU8sR0FBRyxD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
